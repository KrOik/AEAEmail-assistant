# AI学术邮件助手

这是一个基于AI的学术邮件助手系统，可以帮助用户查询邮件相关知识库信息，并生成专业的学术邮件。

## 功能特性

### 1. 知识库查询模式
- 查询教师称谓信息
- 获取邮件写作指南
- 了解学术邮件最佳实践

### 2. 邮件撰写模式
- 根据用户需求生成专业学术邮件
- 支持中英文双语邮件
- 提供邮件撰写建议和注意事项

## 系统架构

### 前端 (HTML + JavaScript)
- `Untitled-1.html` - 主应用界面
- `test_api.html` - API测试页面

### 后端 (Python Flask)
- `11.py` - Flask API服务器
- 集成阿里云通义千问API进行AI内容生成

## 安装和运行

### 1. 安装Python依赖
```bash
pip install flask flask-cors requests python-dotenv
```

### 2. 配置API密钥
创建 `.env` 文件并添加你的阿里云API密钥：
```
QWEN_API_KEY=your_api_key_here
```

### 3. 启动后端服务
```bash
python 11.py
```
服务将在 `http://localhost:5000` 启动

### 4. 打开前端页面
- 主应用：`Untitled-1.html`
- API测试：`test_api.html`

## API接口

### 健康检查
- `GET /api/health` - 检查API服务状态

### 知识库查询
- `POST /api/query-knowledge` - 查询知识库信息
- 请求体：`{"question": "查询问题"}`
- 响应：知识库查询结果

### 邮件生成
- `POST /api/generate-email-from-chat` - 根据聊天内容生成邮件
- 请求体：`{"message": "用户需求描述", "recipient": "收件人信息"}`
- 响应：包含中英文邮件内容和撰写建议

## 使用说明

### 知识库查询
1. 选择"知识库查询"模式
2. 输入查询问题，例如：
   - "haochuan.jiang的称谓是什么"
   - "邮件主题应该怎么写"
   - "给老师的邮件称呼应该用什么"

### 邮件撰写
1. 选择"邮件撰写"模式
2. 描述您的邮件需求，例如：
   - "我想给张教授写一封邮件，咨询关于课程项目的问题"
   - "申请作业延期3天，因为家庭特殊情况"
   - "询问关于MAT101课程作业的问题"

## 知识库内容

系统内置了以下知识库内容：
- 邮件撰写指南（避雷.docx）
- 教师称谓列表（邮件.docx）

## 注意事项

1. 确保后端服务正在运行
2. 检查API密钥配置是否正确
3. 如果遇到跨域问题，确保CORS配置正确
4. 建议先使用测试页面验证API连接

## 故障排除

### 常见问题
1. **API连接失败**：检查后端服务是否启动，端口是否正确
2. **邮件生成失败**：检查API密钥是否有效，网络连接是否正常
3. **跨域错误**：确保后端CORS配置正确

### 调试方法
1. 使用 `test_api.html` 测试各个API接口
2. 检查浏览器控制台的错误信息
3. 查看后端服务的日志输出

## 技术栈

- **前端**：HTML5, CSS3, JavaScript (ES6+)
- **后端**：Python 3.7+, Flask
- **AI服务**：阿里云通义千问API
- **数据格式**：JSON

## 许可证

本项目仅供学习和研究使用。
